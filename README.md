7# HH Vacancies Database

Система для получения, хранения и анализа вакансий с сайта [hh.ru](https://hh.ru) с использованием PostgreSQL.

---

## Описание

Проект позволяет:

- Получать вакансии и информацию о компаниях через публичный API hh.ru.
- Сохранять данные о компаниях и вакансиях в базу данных PostgreSQL.
- Выполнять анализ вакансий: средняя зарплата, вакансии с высокой зарплатой.
- Искать вакансии по ключевым словам и фильтровать по компаниям.
- Работать с удобным интерфейсом командной строки (CLI).

Проект интегрирован с объектами `Company` и `Vacancy` и использует модуль `DataFiller` для заполнения базы данных через API hh.ru (`HHAPI`).

---

## Структура проекта

```bash
hh_vacancies_db/
│
├─ main.py # Точка входа, меню CLI
├─ config.py # Конфигурация базы данных и API
├─ README.md
├─ src/
│ ├─ init.py
│ ├─ company.py # Модель компании
│ ├─ vacancy.py # Модель вакансии
│ ├─ base_api.py # Базовый абстрактный класс API
│ ├─ hh_api.py # Работа с API hh.ru
│ ├─ db_manager.py # Менеджер работы с БД
│ ├─ data_filler.py # Заполнение БД вакансиями
│ ├─ database_creator.py # Создание и пересоздание таблиц
│ └─ utils/
│  └─ helpers.py # Вспомогательные функции
├── poetry.lock                # зависимости
├── pyproject.toml             # настройки Poetry
├── .gitignore
└── README.md
```
## Установка
1. Установите Python 3.10+ и Poetry:
2. Установите зависимости:
```bash
pip install poetry
```
3. Установите PostgreSQL и создайте базу данных (по умолчанию hh_vacancies):
```bash
createdb -U postgres hh_vacancies
```
4. Настройте доступ к БД в config.py или через переменные окружения:
```python
DB_HOST – хост базы данных (по умолчанию localhost)

DB_PORT – порт базы данных (по умолчанию 5432)

DB_NAME – имя базы данных (по умолчанию hh_vacancies)

DB_USER – пользователь PostgreSQL (по умолчанию postgres)

DB_PASSWORD – пароль пользователя (по умолчанию 0055)
```

## Использование: 
 1. Запустите приложение:
 ```bash
poetry run python main.py
 ```
 2. Меню CLI позволяет выполнять следующие действия:


| № | Действие                          |
| - | --------------------------------- |
| 1 | Компании и количество вакансий    |
| 2 | Все вакансии                      |
| 3 | Средняя зарплата                  |
| 4 | Вакансии с высокой зарплатой      |
| 5 | Поиск вакансий по ключевым словам |
| 6 | Вакансии по компании              |
| 7 | Настройка базы данных             |
| 8 | Заполнить базу вакансиями с hh.ru |
| 0 | Выход                             |


## Примеры запуска

- **Получение вакансий и сохранение их в базу**  
  (через CLI → пункт 8):

```
Введите ключевое слово: Python
Количество вакансий на странице: 20
Максимальное количество страниц: 5
```

- **Запуск напрямую через DataFiller в Python-скрипте**:

```python
from src.data_filler import DataFiller

filler = DataFiller()
filler.fill_vacancies(["Yandex", "Sber"])
```

---

## Структура базы данных

**companies**:

| Поле         | Тип  | Описание                  |
|--------------|------|---------------------------|
| company_id   | TEXT | Уникальный ID компании    |
| company_name | TEXT | Название компании         |
| site_url     | TEXT | Сайт компании             |

**vacancies**:

| Поле          | Тип       | Описание                        |
|---------------|-----------|---------------------------------|
| url           | TEXT      | Ссылка на вакансию (PK)         |
| company_id    | TEXT      | ID компании (FK)                |
| vacancy_name  | TEXT      | Название вакансии               |
| requirements  | TEXT      | Требования / описание вакансии  |
| salary        | FLOAT     | Средняя зарплата                |
| remote        | BOOLEAN   | Удаленная работа                |
| experience    | TEXT      | Опыт работы                     |
| currency      | TEXT      | Валюта зарплаты                 |
| last_updated  | TIMESTAMP | Дата последнего обновления      |

---

## Лицензия

MIT License